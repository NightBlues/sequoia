OASISFormat:  0.4
Name:         sequoia
OCamlVersion: >= 4.04.0
Version:      0.0.0
Synopsis:     Type-safe SQL library and syntax extension
Authors:      Andre Nathan
License:      MIT

BuildTools:   ocamlbuild
Plugins:      DevFiles (0.4), META (0.4)

Library "sequoia"
  FindlibName:      sequoia
  Path:             lib
  Modules:          Sequoia,
                    Sequoia_common,
                    Sequoia_delete,
                    Sequoia_driver,
                    Sequoia_expr,
                    Sequoia_field,
                    Sequoia_insert,
                    Sequoia_lit,
                    Sequoia_param,
                    Sequoia_query_common,
                    Sequoia_replace,
                    Sequoia_select,
                    Sequoia_table,
                    Sequoia_update,
                    Sequoia_vector

Flag mysql
  Description:      Build the MySQL driver
  Default:          true

Library "sequoia_mysql"
  Build$:           flag(mysql)
  Install$:         flag(mysql)
  FindlibParent:    sequoia
  FindlibName:      mysql
  Path:             lib/drivers/mysql
  BuildDepends:     sequoia,
                    unix
  Modules:          Sequoia_mysql

Flag sqlite
  Description:      Build the SQLite driver
  Default:          true

Library "sequoia_sqlite"
  Build$:           flag(sqlite)
  Install$:         flag(sqlite)
  FindlibParent:    sequoia
  FindlibName:      sqlite
  Path:             lib/drivers/sqlite
  BuildDepends:     sequoia
  Modules:          Sequoia_sqlite

Flag ppx
  Description:      Build the ppx syntax extension
  Default:          true

Library "sequoia_ppx"
  Build$:           flag(ppx)
  Install$:         flag(ppx)
  FindlibParent:    sequoia
  FindlibName:      ppx
  Path:             lib/ppx
  Modules:          Sequoia_ppx
  XMETARequires:    sequoia
  XMETAExtraLines:  ppx = "ppx_sequoia"

Executable "ppx_sequoia"
  Build$:           flag(ppx)
  Install$:         flag(ppx)
  Path:             lib/ppx
  MainIs:           ppx_sequoia.ml
  BuildDepends:     compiler-libs.common,
                    ppx_tools
  CompiledObject:   best

Executable "ppx_test"
  Build$:           flag(ppx)
  Install:          false
  Path:             lib_test/ppx
  MainIs:           t.ml
  BuildDepends:     sequoia, sequoia.mysql, sequoia.ppx
  CompiledObject:   best

Executable "readme_test"
  Build$:           flag(ppx)
  Install:          false
  Path:             lib_test/ppx
  MainIs:           readme.ml
  BuildDepends:     sequoia, sequoia.mysql, sequoia.ppx
  CompiledObject:   best

Document "sequoia"
  Title:                Sequoia documentation
  Type:                 ocamlbuild (0.4)
  BuildTools:           ocamldoc
  XOCamlbuildPath:      lib
  XOCamlbuildLibraries: sequoia
